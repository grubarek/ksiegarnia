

<ui:composition template="/WEB-INF/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:of="http://omnifaces.org/functions"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="title">Dodawanie książek</ui:define>

    <ui:define name="menu">
        <ui:include src="/modules/tab_menu.xhtml">
            <ui:param name="selectedTabIndex" value="3" />
        </ui:include>
    </ui:define>

    <ui:define name="content">
        <h1>Tutaj bedzie formularz dodania ksiazek</h1>
        <h:form id = "addForm" rendered="#{not empty userBean.selectedBook}">
            <p:growl id="growl" showDetail="true" />

            <p:panelGrid columns="2">

            <h:outputLabel for="key" value="Tytul:"/>
            <p:inputText id="key" value="#{userBean.selectedBook.title}" maxlength="255" size="120" required="true" requiredMessage="Pole jest obowiązkowe" validatorMessage="Niepoprawny format nazzwy: podaj tylko litery i cyfry oddzielone znakiem podkreślenia lub białym znakiem" readonly="#{sessionBean.viewMode}" >
                <f:validateRegex pattern="^[\u0400-\u04FFa-zA-Z0-9\s]+(_[\u0400-\u04FFa-zA-Z0-9\s]+)*$" />
            </p:inputText>
            <h:outputLabel for="key" value="Autor:"/>
            <p:inputText id="key" value="#{userBean.selectedBook.author}" maxlength="255" size="120" required="true" requiredMessage="Pole jest obowiązkowe" validatorMessage="Niepoprawny format nazzwy: podaj tylko litery i cyfry oddzielone znakiem podkreślenia lub białym znakiem" readonly="#{sessionBean.viewMode}" >
                <f:validateRegex pattern="^[\u0400-\u04FFa-zA-Z0-9\s]+(_[\u0400-\u04FFa-zA-Z0-9\s]+)*$" />
            </p:inputText>
            <h:outputLabel for="content1" value="Opis:"/>
            <p:column colspan="3">
                <p:inputTextarea id="content1" rows="4" cols="100" value="#{userBean.selectedBook.description}" readonly="#{sessionBean.viewMode}" />

            </p:column>
            <f:facet name="footer">
                <p:commandButton value="Dodaj ksiazke" icon="ui-icon-disk" action="#{userBean.save()}" update="@form"  />
            </f:facet>

        </h:form>

    </ui:define>

</ui:composition>